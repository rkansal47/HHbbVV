#!/bin/bash
# shellcheck disable=SC2086,SC2043,SC2034

####################################################################################################
# Resonant signal templates
# Author: Raghav Kansal
####################################################################################################

MAIN_DIR="../../.."
# data_dir="$MAIN_DIR/../data/skimmer/24Mar14UpdateData"
# signal_data_dir="/ceph/cms/store/user/rkansal/bbVV/skimmer/25Jan29UpdateXHYLP"
signal_data_dir="/ceph/cms/store/user/rkansal/bbVV/skimmer/25Feb6XHY"
# signal_data_dir="/eos/uscms/store/user/rkansal/bbVV/skimmer/24Feb5LPMatchingFix"
TAG=""


options=$(getopt -o "" --long "tag:" -- "$@")
eval set -- "$options"

while true; do
    case "$1" in
        --tag)
            shift
            TAG=$1
            ;;
        --)
            shift
            break;;
        \?)
            echo "Invalid option: -$OPTARG" >&2
            exit 1
            ;;
        :)
            echo "Option -$OPTARG requires an argument." >&2
            exit 1
            ;;
    esac
    shift
done

if [[ -z $TAG ]]; then
  echo "Tag required using the --tag option. Exiting"
  exit 1
fi


for sample in NMSSM_XToYHTo2W2BTo4Q2B_MX-1200_MY-150 NMSSM_XToYHTo2W2BTo4Q2B_MX-1400_MY-100 NMSSM_XToYHTo2W2BTo4Q2B_MX-1400_MY-125 NMSSM_XToYHTo2W2BTo4Q2B_MX-1400_MY-150 NMSSM_XToYHTo2W2BTo4Q2B_MX-1400_MY-190 NMSSM_XToYHTo2W2BTo4Q2B_MX-1400_MY-250 NMSSM_XToYHTo2W2BTo4Q2B_MX-1400_MY-300 NMSSM_XToYHTo2W2BTo4Q2B_MX-1400_MY-350 NMSSM_XToYHTo2W2BTo4Q2B_MX-1400_MY-400 NMSSM_XToYHTo2W2BTo4Q2B_MX-1400_MY-450 NMSSM_XToYHTo2W2BTo4Q2B_MX-1400_MY-500 NMSSM_XToYHTo2W2BTo4Q2B_MX-1400_MY-60 NMSSM_XToYHTo2W2BTo4Q2B_MX-1400_MY-600 NMSSM_XToYHTo2W2BTo4Q2B_MX-1400_MY-70 NMSSM_XToYHTo2W2BTo4Q2B_MX-1400_MY-80 NMSSM_XToYHTo2W2BTo4Q2B_MX-1400_MY-90 NMSSM_XToYHTo2W2BTo4Q2B_MX-1600_MY-100 NMSSM_XToYHTo2W2BTo4Q2B_MX-1600_MY-125 NMSSM_XToYHTo2W2BTo4Q2B_MX-1600_MY-150 NMSSM_XToYHTo2W2BTo4Q2B_MX-1600_MY-190 NMSSM_XToYHTo2W2BTo4Q2B_MX-1600_MY-250 NMSSM_XToYHTo2W2BTo4Q2B_MX-1600_MY-300 NMSSM_XToYHTo2W2BTo4Q2B_MX-1600_MY-350 NMSSM_XToYHTo2W2BTo4Q2B_MX-1600_MY-400 NMSSM_XToYHTo2W2BTo4Q2B_MX-1600_MY-450 NMSSM_XToYHTo2W2BTo4Q2B_MX-1600_MY-500 NMSSM_XToYHTo2W2BTo4Q2B_MX-1600_MY-60 NMSSM_XToYHTo2W2BTo4Q2B_MX-1600_MY-600 NMSSM_XToYHTo2W2BTo4Q2B_MX-1600_MY-80 NMSSM_XToYHTo2W2BTo4Q2B_MX-1600_MY-90 NMSSM_XToYHTo2W2BTo4Q2B_MX-1800_MY-100 NMSSM_XToYHTo2W2BTo4Q2B_MX-1800_MY-125 NMSSM_XToYHTo2W2BTo4Q2B_MX-1800_MY-150 NMSSM_XToYHTo2W2BTo4Q2B_MX-1800_MY-190 NMSSM_XToYHTo2W2BTo4Q2B_MX-1800_MY-250 NMSSM_XToYHTo2W2BTo4Q2B_MX-1800_MY-300 NMSSM_XToYHTo2W2BTo4Q2B_MX-1800_MY-350 NMSSM_XToYHTo2W2BTo4Q2B_MX-1800_MY-400 NMSSM_XToYHTo2W2BTo4Q2B_MX-1800_MY-450 NMSSM_XToYHTo2W2BTo4Q2B_MX-1800_MY-500 NMSSM_XToYHTo2W2BTo4Q2B_MX-1800_MY-60 NMSSM_XToYHTo2W2BTo4Q2B_MX-1800_MY-600 NMSSM_XToYHTo2W2BTo4Q2B_MX-1800_MY-70 NMSSM_XToYHTo2W2BTo4Q2B_MX-1800_MY-80 NMSSM_XToYHTo2W2BTo4Q2B_MX-1800_MY-90 NMSSM_XToYHTo2W2BTo4Q2B_MX-2000_MY-100 NMSSM_XToYHTo2W2BTo4Q2B_MX-2000_MY-125 NMSSM_XToYHTo2W2BTo4Q2B_MX-2000_MY-150 NMSSM_XToYHTo2W2BTo4Q2B_MX-2000_MY-190 NMSSM_XToYHTo2W2BTo4Q2B_MX-2000_MY-250 NMSSM_XToYHTo2W2BTo4Q2B_MX-2000_MY-300 NMSSM_XToYHTo2W2BTo4Q2B_MX-2000_MY-350 NMSSM_XToYHTo2W2BTo4Q2B_MX-2000_MY-400 NMSSM_XToYHTo2W2BTo4Q2B_MX-2000_MY-450 NMSSM_XToYHTo2W2BTo4Q2B_MX-2000_MY-500 NMSSM_XToYHTo2W2BTo4Q2B_MX-2000_MY-60 NMSSM_XToYHTo2W2BTo4Q2B_MX-2000_MY-600 NMSSM_XToYHTo2W2BTo4Q2B_MX-2000_MY-70 NMSSM_XToYHTo2W2BTo4Q2B_MX-2000_MY-80 NMSSM_XToYHTo2W2BTo4Q2B_MX-2000_MY-90 NMSSM_XToYHTo2W2BTo4Q2B_MX-2200_MY-100 NMSSM_XToYHTo2W2BTo4Q2B_MX-2200_MY-125 NMSSM_XToYHTo2W2BTo4Q2B_MX-2200_MY-150 NMSSM_XToYHTo2W2BTo4Q2B_MX-2200_MY-190 NMSSM_XToYHTo2W2BTo4Q2B_MX-2200_MY-250 NMSSM_XToYHTo2W2BTo4Q2B_MX-2200_MY-300 NMSSM_XToYHTo2W2BTo4Q2B_MX-2200_MY-350 NMSSM_XToYHTo2W2BTo4Q2B_MX-2200_MY-400 NMSSM_XToYHTo2W2BTo4Q2B_MX-2200_MY-450 NMSSM_XToYHTo2W2BTo4Q2B_MX-2200_MY-500 NMSSM_XToYHTo2W2BTo4Q2B_MX-2200_MY-60 NMSSM_XToYHTo2W2BTo4Q2B_MX-2200_MY-600 NMSSM_XToYHTo2W2BTo4Q2B_MX-2200_MY-70 NMSSM_XToYHTo2W2BTo4Q2B_MX-2200_MY-80 NMSSM_XToYHTo2W2BTo4Q2B_MX-2200_MY-90 NMSSM_XToYHTo2W2BTo4Q2B_MX-2400_MY-100 NMSSM_XToYHTo2W2BTo4Q2B_MX-2400_MY-125 NMSSM_XToYHTo2W2BTo4Q2B_MX-2400_MY-150 NMSSM_XToYHTo2W2BTo4Q2B_MX-2400_MY-190 NMSSM_XToYHTo2W2BTo4Q2B_MX-2400_MY-250 NMSSM_XToYHTo2W2BTo4Q2B_MX-2400_MY-300 NMSSM_XToYHTo2W2BTo4Q2B_MX-2400_MY-350 NMSSM_XToYHTo2W2BTo4Q2B_MX-2400_MY-400 NMSSM_XToYHTo2W2BTo4Q2B_MX-2400_MY-450 NMSSM_XToYHTo2W2BTo4Q2B_MX-2400_MY-500 NMSSM_XToYHTo2W2BTo4Q2B_MX-2400_MY-60 NMSSM_XToYHTo2W2BTo4Q2B_MX-2400_MY-600 NMSSM_XToYHTo2W2BTo4Q2B_MX-2400_MY-70 NMSSM_XToYHTo2W2BTo4Q2B_MX-2400_MY-80 NMSSM_XToYHTo2W2BTo4Q2B_MX-2400_MY-90 NMSSM_XToYHTo2W2BTo4Q2B_MX-2500_MY-100 NMSSM_XToYHTo2W2BTo4Q2B_MX-2500_MY-125 NMSSM_XToYHTo2W2BTo4Q2B_MX-2500_MY-150 NMSSM_XToYHTo2W2BTo4Q2B_MX-2500_MY-190 NMSSM_XToYHTo2W2BTo4Q2B_MX-2500_MY-250 NMSSM_XToYHTo2W2BTo4Q2B_MX-2500_MY-300 NMSSM_XToYHTo2W2BTo4Q2B_MX-2500_MY-350 NMSSM_XToYHTo2W2BTo4Q2B_MX-2500_MY-400 NMSSM_XToYHTo2W2BTo4Q2B_MX-2500_MY-450 NMSSM_XToYHTo2W2BTo4Q2B_MX-2500_MY-500 NMSSM_XToYHTo2W2BTo4Q2B_MX-2500_MY-60 NMSSM_XToYHTo2W2BTo4Q2B_MX-2500_MY-600 NMSSM_XToYHTo2W2BTo4Q2B_MX-2500_MY-70 NMSSM_XToYHTo2W2BTo4Q2B_MX-2500_MY-80 NMSSM_XToYHTo2W2BTo4Q2B_MX-2500_MY-90 NMSSM_XToYHTo2W2BTo4Q2B_MX-2600_MY-100 NMSSM_XToYHTo2W2BTo4Q2B_MX-2600_MY-125 NMSSM_XToYHTo2W2BTo4Q2B_MX-2600_MY-150 NMSSM_XToYHTo2W2BTo4Q2B_MX-2600_MY-190 NMSSM_XToYHTo2W2BTo4Q2B_MX-2600_MY-250 NMSSM_XToYHTo2W2BTo4Q2B_MX-2600_MY-300 NMSSM_XToYHTo2W2BTo4Q2B_MX-2600_MY-350 NMSSM_XToYHTo2W2BTo4Q2B_MX-2600_MY-400 NMSSM_XToYHTo2W2BTo4Q2B_MX-2600_MY-450 NMSSM_XToYHTo2W2BTo4Q2B_MX-2600_MY-500 NMSSM_XToYHTo2W2BTo4Q2B_MX-2600_MY-60 NMSSM_XToYHTo2W2BTo4Q2B_MX-2600_MY-600 NMSSM_XToYHTo2W2BTo4Q2B_MX-2600_MY-70 NMSSM_XToYHTo2W2BTo4Q2B_MX-2600_MY-80 NMSSM_XToYHTo2W2BTo4Q2B_MX-2600_MY-90 NMSSM_XToYHTo2W2BTo4Q2B_MX-2800_MY-100 NMSSM_XToYHTo2W2BTo4Q2B_MX-2800_MY-125 NMSSM_XToYHTo2W2BTo4Q2B_MX-2800_MY-150 NMSSM_XToYHTo2W2BTo4Q2B_MX-2800_MY-190 NMSSM_XToYHTo2W2BTo4Q2B_MX-2800_MY-250 NMSSM_XToYHTo2W2BTo4Q2B_MX-2800_MY-300 NMSSM_XToYHTo2W2BTo4Q2B_MX-2800_MY-350 NMSSM_XToYHTo2W2BTo4Q2B_MX-2800_MY-400 NMSSM_XToYHTo2W2BTo4Q2B_MX-2800_MY-450 NMSSM_XToYHTo2W2BTo4Q2B_MX-2800_MY-500 NMSSM_XToYHTo2W2BTo4Q2B_MX-2800_MY-60 NMSSM_XToYHTo2W2BTo4Q2B_MX-2800_MY-600 NMSSM_XToYHTo2W2BTo4Q2B_MX-2800_MY-70 NMSSM_XToYHTo2W2BTo4Q2B_MX-2800_MY-80 NMSSM_XToYHTo2W2BTo4Q2B_MX-2800_MY-90 NMSSM_XToYHTo2W2BTo4Q2B_MX-3000_MY-100 NMSSM_XToYHTo2W2BTo4Q2B_MX-3000_MY-125 NMSSM_XToYHTo2W2BTo4Q2B_MX-3000_MY-150 NMSSM_XToYHTo2W2BTo4Q2B_MX-3000_MY-190 NMSSM_XToYHTo2W2BTo4Q2B_MX-3000_MY-250 NMSSM_XToYHTo2W2BTo4Q2B_MX-3000_MY-300 NMSSM_XToYHTo2W2BTo4Q2B_MX-3000_MY-350 NMSSM_XToYHTo2W2BTo4Q2B_MX-3000_MY-400 NMSSM_XToYHTo2W2BTo4Q2B_MX-3000_MY-450 NMSSM_XToYHTo2W2BTo4Q2B_MX-3000_MY-500 NMSSM_XToYHTo2W2BTo4Q2B_MX-3000_MY-60 NMSSM_XToYHTo2W2BTo4Q2B_MX-3000_MY-600 NMSSM_XToYHTo2W2BTo4Q2B_MX-3000_MY-70 NMSSM_XToYHTo2W2BTo4Q2B_MX-3000_MY-80 NMSSM_XToYHTo2W2BTo4Q2B_MX-3000_MY-90 NMSSM_XToYHTo2W2BTo4Q2B_MX-3500_MY-100 NMSSM_XToYHTo2W2BTo4Q2B_MX-3500_MY-125 NMSSM_XToYHTo2W2BTo4Q2B_MX-3500_MY-150 NMSSM_XToYHTo2W2BTo4Q2B_MX-3500_MY-190 NMSSM_XToYHTo2W2BTo4Q2B_MX-3500_MY-250 NMSSM_XToYHTo2W2BTo4Q2B_MX-3500_MY-300 NMSSM_XToYHTo2W2BTo4Q2B_MX-3500_MY-350 NMSSM_XToYHTo2W2BTo4Q2B_MX-3500_MY-400 NMSSM_XToYHTo2W2BTo4Q2B_MX-3500_MY-450 NMSSM_XToYHTo2W2BTo4Q2B_MX-3500_MY-500 NMSSM_XToYHTo2W2BTo4Q2B_MX-3500_MY-60 NMSSM_XToYHTo2W2BTo4Q2B_MX-3500_MY-600 NMSSM_XToYHTo2W2BTo4Q2B_MX-3500_MY-70 NMSSM_XToYHTo2W2BTo4Q2B_MX-3500_MY-80 NMSSM_XToYHTo2W2BTo4Q2B_MX-3500_MY-90 NMSSM_XToYHTo2W2BTo4Q2B_MX-4000_MY-100 NMSSM_XToYHTo2W2BTo4Q2B_MX-4000_MY-125 NMSSM_XToYHTo2W2BTo4Q2B_MX-4000_MY-150 NMSSM_XToYHTo2W2BTo4Q2B_MX-4000_MY-190 NMSSM_XToYHTo2W2BTo4Q2B_MX-4000_MY-250 NMSSM_XToYHTo2W2BTo4Q2B_MX-4000_MY-300 NMSSM_XToYHTo2W2BTo4Q2B_MX-4000_MY-350 NMSSM_XToYHTo2W2BTo4Q2B_MX-4000_MY-400 NMSSM_XToYHTo2W2BTo4Q2B_MX-4000_MY-450 NMSSM_XToYHTo2W2BTo4Q2B_MX-4000_MY-500 NMSSM_XToYHTo2W2BTo4Q2B_MX-4000_MY-60 NMSSM_XToYHTo2W2BTo4Q2B_MX-4000_MY-600 NMSSM_XToYHTo2W2BTo4Q2B_MX-4000_MY-70 NMSSM_XToYHTo2W2BTo4Q2B_MX-4000_MY-80 NMSSM_XToYHTo2W2BTo4Q2B_MX-4000_MY-90
do
    for year in 2016APV 2016 2017 2018
    do
        python -u postprocessing.py --templates --year $year --template-dir "templates/$TAG/$sample" --signal-data-dirs "$signal_data_dir" --resonant --sig-samples $sample --bg-keys "" --no-data
        # --lpsfs --override-systs
    done
done
