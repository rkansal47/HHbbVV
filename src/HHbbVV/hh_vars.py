"""
Collection of variables useful for the nonresonant analysis.

Author: Raghav Kansal
"""

from __future__ import annotations

from collections import OrderedDict

years = ["2016APV", "2016", "2017", "2018"]

LUMI = {  # in pb^-1
    "2016": 16830.0,
    "2016APV": 19500.0,
    "2017": 41480.0,
    "2018": 59830.0,
}

# order is important for loading BDT preds
# label: selector
# when loading samples, assigns all sample names which start with `selector` to the `label` dataframe
# if `selector` starts with `*`, assigns all sample names which have `selector` in it
samples = OrderedDict(
    [
        ("QCD", "QCD"),
        ("TT", "TT"),
        ("ST", "ST"),
        ("W+Jets", "WJets"),
        ("Z+Jets", "ZJets"),
        ("Diboson", ("WW", "WZ", "ZZ")),
        # breaking single Higgs down into production modes for combination
        # https://gitlab.cern.ch/hh/naming-conventions#single-h-backgrounds
        ("ggFHbb", "GluGluHToBB"),
        ("VBFHbb", "VBFHToBB"),
        ("ZHbb", "ZH_HToBB"),
        ("WHbb", ("WminusH_HToBB", "WplusH_HToBB")),
        ("ggZHbb", "ggZH_HToBB"),
        ("ttHbb", "ttHToBB"),
        ("HWW", ("*HToWW", "*HToNonbb")),
        # ("HH", ("GluGluToHHTo4B_node_cHHH1_preUL")),
        ("Data", "JetHT"),
    ]
)


data_key = "Data"
qcd_key = "QCD"
bg_keys = [key for key in samples if key != data_key]
hbb_bg_keys = [key for key in samples if "Hbb" in key]

# change HHbbVV to hbbhVV
nonres_samples = OrderedDict(
    [
        ("HHbbVV", "GluGluToHHTobbVV_node_cHHH1"),
        ("ggHH_kl_2p45_kt_1_HHbbVV", "GluGluToHHTobbVV_node_cHHH2p45"),
        ("ggHH_kl_5_kt_1_HHbbVV", "GluGluToHHTobbVV_node_cHHH5"),
        ("ggHH_kl_0_kt_1_HHbbVV", "GluGluToHHTobbVV_node_cHHH0"),  # not used in combination
        ("VBFHHbbVV", "VBF_HHTobbVV_CV_1_C2V_1_C3_1"),
        ("qqHH_CV_1_C2V_0_kl_1_HHbbVV", "VBF_HHTobbVV_CV_1_C2V_0_C3_1"),
        ("qqHH_CV_1p5_C2V_1_kl_1_HHbbVV", "VBF_HHTobbVV_CV_1_5_C2V_1_C3_1"),
        ("qqHH_CV_1_C2V_1_kl_2_HHbbVV", "VBF_HHTobbVV_CV_1_C2V_1_C3_2"),
        ("qqHH_CV_1_C2V_2_kl_1_HHbbVV", "VBF_HHTobbVV_CV_1_C2V_2_C3_1"),
        ("qqHH_CV_1_C2V_1_kl_0_HHbbVV", "VBF_HHTobbVV_CV_1_C2V_1_C3_0"),
        (
            "qqHH_CV_0p5_C2V_1_kl_1_HHbbVV",
            "VBF_HHTobbVV_CV_0_5_C2V_1_C3_1",
        ),  # not used in combination
    ]
)
nonres_sig_keys = list(nonres_samples.keys())

res_samples = OrderedDict([])

res_sigs = [
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1000_MY-100",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1000_MY-125",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1000_MY-150",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1000_MY-190",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1000_MY-250",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1000_MY-300",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1000_MY-350",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1000_MY-400",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1000_MY-450",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1000_MY-500",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1000_MY-60",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1000_MY-600",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1000_MY-80",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1000_MY-90",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1200_MY-100",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1200_MY-150",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1200_MY-190",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1200_MY-250",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1200_MY-300",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1200_MY-350",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1200_MY-400",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1200_MY-450",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1200_MY-500",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1200_MY-60",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1200_MY-600",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1200_MY-70",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1200_MY-80",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1200_MY-90",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1400_MY-100",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1400_MY-125",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1400_MY-150",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1400_MY-190",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1400_MY-250",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1400_MY-300",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1400_MY-350",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1400_MY-400",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1400_MY-450",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1400_MY-500",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1400_MY-60",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1400_MY-600",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1400_MY-70",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1400_MY-80",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1400_MY-90",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1600_MY-100",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1600_MY-125",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1600_MY-150",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1600_MY-190",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1600_MY-250",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1600_MY-300",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1600_MY-350",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1600_MY-400",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1600_MY-450",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1600_MY-500",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1600_MY-60",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1600_MY-600",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1600_MY-80",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1600_MY-90",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1800_MY-100",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1800_MY-125",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1800_MY-150",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1800_MY-190",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1800_MY-250",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1800_MY-300",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1800_MY-350",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1800_MY-400",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1800_MY-450",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1800_MY-500",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1800_MY-60",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1800_MY-600",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1800_MY-70",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1800_MY-80",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-1800_MY-90",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2000_MY-100",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2000_MY-125",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2000_MY-150",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2000_MY-190",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2000_MY-250",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2000_MY-300",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2000_MY-350",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2000_MY-400",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2000_MY-450",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2000_MY-500",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2000_MY-60",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2000_MY-600",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2000_MY-70",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2000_MY-80",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2000_MY-90",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2200_MY-100",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2200_MY-125",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2200_MY-150",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2200_MY-190",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2200_MY-250",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2200_MY-300",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2200_MY-350",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2200_MY-400",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2200_MY-450",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2200_MY-500",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2200_MY-60",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2200_MY-600",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2200_MY-70",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2200_MY-80",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2200_MY-90",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2400_MY-100",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2400_MY-125",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2400_MY-150",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2400_MY-190",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2400_MY-250",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2400_MY-300",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2400_MY-350",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2400_MY-400",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2400_MY-450",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2400_MY-500",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2400_MY-60",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2400_MY-600",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2400_MY-70",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2400_MY-80",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2400_MY-90",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2500_MY-100",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2500_MY-125",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2500_MY-150",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2500_MY-190",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2500_MY-250",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2500_MY-300",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2500_MY-350",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2500_MY-400",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2500_MY-450",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2500_MY-500",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2500_MY-60",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2500_MY-600",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2500_MY-70",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2500_MY-80",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2500_MY-90",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2600_MY-100",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2600_MY-125",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2600_MY-150",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2600_MY-190",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2600_MY-250",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2600_MY-300",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2600_MY-350",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2600_MY-400",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2600_MY-450",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2600_MY-500",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2600_MY-60",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2600_MY-600",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2600_MY-70",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2600_MY-80",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2600_MY-90",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2800_MY-100",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2800_MY-125",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2800_MY-150",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2800_MY-190",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2800_MY-250",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2800_MY-300",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2800_MY-350",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2800_MY-400",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2800_MY-450",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2800_MY-500",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2800_MY-60",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2800_MY-600",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2800_MY-70",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2800_MY-80",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-2800_MY-90",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-3000_MY-100",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-3000_MY-125",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-3000_MY-150",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-3000_MY-190",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-3000_MY-250",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-3000_MY-300",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-3000_MY-350",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-3000_MY-400",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-3000_MY-450",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-3000_MY-500",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-3000_MY-60",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-3000_MY-600",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-3000_MY-70",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-3000_MY-80",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-3000_MY-90",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-3500_MY-100",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-3500_MY-125",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-3500_MY-150",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-3500_MY-190",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-3500_MY-250",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-3500_MY-300",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-3500_MY-350",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-3500_MY-400",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-3500_MY-450",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-3500_MY-500",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-3500_MY-60",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-3500_MY-600",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-3500_MY-70",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-3500_MY-80",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-3500_MY-90",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-4000_MY-100",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-4000_MY-125",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-4000_MY-150",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-4000_MY-190",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-4000_MY-250",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-4000_MY-300",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-4000_MY-350",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-4000_MY-400",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-4000_MY-450",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-4000_MY-500",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-4000_MY-60",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-4000_MY-600",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-4000_MY-70",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-4000_MY-80",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-4000_MY-90",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-600_MY-100",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-600_MY-125",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-600_MY-150",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-600_MY-250",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-600_MY-300",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-600_MY-400",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-600_MY-60",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-600_MY-70",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-600_MY-80",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-600_MY-90",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-700_MY-100",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-700_MY-125",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-700_MY-150",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-700_MY-250",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-700_MY-300",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-700_MY-400",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-700_MY-500",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-700_MY-60",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-700_MY-70",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-700_MY-80",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-700_MY-90",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-800_MY-100",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-800_MY-125",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-800_MY-150",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-800_MY-250",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-800_MY-300",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-800_MY-400",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-800_MY-500",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-800_MY-60",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-800_MY-600",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-800_MY-70",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-800_MY-80",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-800_MY-90",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-900_MY-100",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-900_MY-125",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-900_MY-150",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-900_MY-250",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-900_MY-300",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-900_MY-400",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-900_MY-500",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-900_MY-60",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-900_MY-600",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-900_MY-70",
    "NMSSM_XToYHTo2W2BTo4Q2B_MX-900_MY-80",
]

for skey in res_sigs:
    mY = int(skey.split("-")[-1])
    mX = int(skey.split("NMSSM_XToYHTo2W2BTo4Q2B_MX-")[1].split("_")[0])
    res_samples[f"X[{mX}]->H(bb)Y[{mY}](VV)"] = f"NMSSM_XToYHTo2W2BTo4Q2B_MX-{mX}_MY-{mY}"

res_sig_keys = list(res_samples.keys())

all_mc = nonres_sig_keys + res_sig_keys + bg_keys
BDT_sample_order = nonres_sig_keys + bg_keys + [data_key]

# from https://cms.cern.ch/iCMS/jsp/db_notes/noteInfo.jsp?cmsnoteid=CMS%20AN-2021/005
txbb_wps = {
    "2016APV": {"HP": 0.9883, "MP": 0.9737, "LP": 0.9088},
    "2016": {"HP": 0.9883, "MP": 0.9735, "LP": 0.9137},
    "2017": {"HP": 0.987, "MP": 0.9714, "LP": 0.9105},
    "2018": {"HP": 0.988, "MP": 0.9734, "LP": 0.9172},
}

# from https://twiki.cern.ch/twiki/bin/viewauth/CMS/ParticleNetSFs#Working_Points for resonant semi-merged veto
twqq_wps = {
    "2016APV": {"LP": 0.637},
    "2016": {"LP": 0.642},
    "2017": {"LP": 0.579},
    "2018": {"LP": 0.59},
}

norm_preserving_weights = ["genweight", "pileup", "ISRPartonShower", "FSRPartonShower"]

jecs = {
    "JES": "JES_jes",
    "JER": "JER",
}

jmsr = {
    "JMS": "JMS",
    "JMR": "JMR",
}

jec_shifts = []
for key in jecs:
    for shift in ["up", "down"]:
        jec_shifts.append(f"{key}_{shift}")

jmsr_shifts = []
for key in jmsr:
    for shift in ["up", "down"]:
        jmsr_shifts.append(f"{key}_{shift}")

# variables affected by JECs
jec_vars = [
    "bbFatJetPt",
    "VVFatJetPt",
    "DijetEta",
    "DijetPt",
    "DijetMass",
    "bbFatJetPtOverDijetPt",
    "VVFatJetPtOverDijetPt",
    "VVFatJetPtOverbbFatJetPt",
    "BDTScore",
    "VBFJetPt",
    "vbf_Mass_jj",
]


# variables affected by JMS/R
jmsr_vars = [
    "bbFatJetMsd",
    "bbFatJetParticleNetMass",
    "VVFatJetMsd",
    "VVFatJetParticleNetMass",
    "DijetEta",
    "DijetPt",
    "DijetMass",
    "bbFatJetPtOverDijetPt",
    "VVFatJetPtOverDijetPt",
    "VVFatJetPtOverbbFatJetPt",
    "BDTScore",
]

lp_sf_vars = [
    ("lp_sf_lnN", 101),
    ("lp_sf_pt_extrap_vars", 100),
    ("lp_sf_sys_down", 1),
    ("lp_sf_sys_up", 1),
    ("lp_sf_dist", 1),
    ("lp_sf_np_down", 1),
    ("lp_sf_np_up", 1),
    ("lp_sf_double_matched_event", 1),
    ("lp_sf_inside_boundary_quarks", 1),
    ("lp_sf_outside_boundary_quarks", 1),
    ("lp_sf_unmatched_quarks", 1),
    ("lp_sf_rc_unmatched_quarks", 1),
]
